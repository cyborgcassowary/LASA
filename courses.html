<!DOCTYPE html>
<html>
<head>
	<title>javascript example</title>
</head>
<body>

<div class="region region-content">
    <div id="block-system-main" class="block block-system">

    
  <div class="content">
    <div id="node-284424747" class="node node-courses-and-conferences node-full clearfix" about="/dev/?q=courses-and-conferences/3477" typeof="sioc:Item foaf:Document">

      
  
  <div class="content clearfix">
    <div class="field field-name-field-course-name field-type-taxonomy-term-reference field-label-above clearfix"><h3 class="field-label">Course Name: </h3><ul class="links"><li class="taxonomy-term-reference-0"><a href="/dev/?q=course-names/troubleshooting-your-activated-sludge-plantntirification-denitrification" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">Troubleshooting your Activated Sludge Plant/Ntirification Denitrification</a></li></ul></div>

<!-- Employees -->
    <div class="field field-name-field-employee-3 field-type-taxonomy-term-reference field-label-above clearfix"><h3 class="field-label">Employee: </h3>
    	<ul class="links"> 
    	<!-- .links .taxonomy-term-reference-0 a  -->
    		<li class="taxonomy-term-reference-0">
    			<a href="/dev/?q=employees/william-t-markley-sr" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">William T Markley Sr</a></li></ul></div>


<!-- Department -->
    <div class="field field-name-field-department field-type-taxonomy-term-reference field-label-above clearfix"><h3 class="field-label">Department: </h3><ul class="links"><li class="taxonomy-term-reference-0"><a href="/dev/?q=department/treatment-plant" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">Treatment Plant</a></li></ul></div>


<!-- Training Category -->
    <div class="field field-name-field-training-category field-type-taxonomy-term-reference field-label-above clearfix"><h3 class="field-label">Category: </h3><ul class="links"><li class="taxonomy-term-reference-0"><a href="/dev/?q=taxonomy/term/184" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">Treatment plant operation</a></li></ul></div>


<!-- City State -->
    <div class="field field-name-field-city-state field-type-text field-label-above"><div class="field-label">City State:&nbsp;</div><div class="field-items"><div class="field-item even">Lebanon,PA</div></div></div>

<!-- Sponsor -->
    <div class="field field-name-field-course-sponser field-type-text field-label-above"><div class="field-label">Sponsor:&nbsp;</div><div class="field-items"><div class="field-item even">EPWPCOA</div></div></div>


<!-- Date -->
    <div class="field field-name-field-course-date field-type-datestamp field-label-above"><div class="field-label">Date:&nbsp;</div><div class="field-items"><div class="field-item even"><span class="date-display-single" property="dc:date" datatype="xsd:dateTime" content="2007-04-05T00:00:00-04:00">Thursday, April 5, 2007</span></div></div></div>


<!-- Attendance -->
    <div class="field field-name-field-attendance-hours field-type-number-decimal field-label-above"><div class="field-label">Attendance Hours:&nbsp;</div><div class="field-items"><div class="field-item even">7.50</div></div></div>


<!-- Contact Hours Amount -->
    <div class="field field-name-field-contact-hours-amount field-type-number-decimal field-label-above"><div class="field-label">Contact Hours Amount:&nbsp;</div><div class="field-items"><div class="field-item even">6.00</div></div></div>


<!-- Registration -->
    <div class="field field-name-field-registration field-type-number-decimal field-label-above"><div class="field-label">Registration:&nbsp;</div><div class="field-items"><div class="field-item even">135.00</div></div></div>


<!-- Lodging -->
    <div class="field field-name-field-lodging field-type-number-decimal field-label-above"><div class="field-label">Lodging:&nbsp;</div><div class="field-items"><div class="field-item even">0.00</div></div></div>


<!-- Travel -->
    <div class="field field-name-field-travel field-type-number-decimal field-label-above"><div class="field-label">Travel:&nbsp;</div><div class="field-items"><div class="field-item even">0.00</div></div></div>


<!-- Meals -->
    <div class="field field-name-field-meals field-type-number-decimal field-label-above"><div class="field-label">Meals:&nbsp;</div><div class="field-items"><div class="field-item even">0.00</div></div></div>

<!-- Course Description -->
<div class="field field-name-field-course-description field-type-text-long field-label-above"><div class="field-label">Course Description:&nbsp;</div><div class="field-items"><div class="field-item even">attached</div></div></div>

<!-- Other -->
    <div class="field field-name-field-other field-type-number-decimal field-label-above"><div class="field-label">Other:&nbsp;</div><div class="field-items"><div class="field-item even">0.00</div></div></div>

<!-- Reason -->
    <div class="field field-name-field-reason field-type-list-text field-label-above"><div class="field-label">Reason for Taking Course:&nbsp;</div><div class="field-items"><div class="field-item even">Earn Credit Hours</div></div></div>


<!-- Complete -->
    <div class="field field-name-field-complete field-type-list-text field-label-above"><div class="field-label">Complete:&nbsp;</div><div class="field-items"><div class="field-item even">Yes</div></div></div>


<!-- Location Site -->
    <div class="field field-name-field-location-site field-type-taxonomy-term-reference field-label-above clearfix"><h3 class="field-label">Location Site: </h3><ul class="links"><li class="taxonomy-term-reference-0"><div id="taxonomy-term-5525" class="taxonomy-term vocabulary-location-site">

      <h2><a href="/dev/?q=location-site/lebanon">Lebanon</a></h2>
  
  <div class="content">
      </div>

</div>
</li></ul></div>

<!-- Job Title -->
<!-- <div class="field field-name-field-job-title-training field-type-text field-label-above"><div class="field-label">Job Title:&nbsp;</div><div class="field-items"><div class="field-item even">Operator 1</div></div></div><div class="field field-name-field-days field-type-number-decimal field-label-above"><div class="field-label">Days:&nbsp;</div><div class="field-items"><div class="field-item even">1.00</div></div></div>  </div> -->

      <div class="link-wrapper">
      <ul class="links inline"><li class="print_html first last"><a href="/dev/?q=print/284424747" title="Display a printer-friendly version of this page." class="print-page" rel="nofollow">Printer-friendly version</a></li>
</ul>    </div>
  
  
</div>
  </div>
</div>
  </div>


<script type="text/javascript">
	//var query = location.pathname; // change pathname to search
	var protocol = location.protocol;
	var host = location.host;
	var pathName = location.pathname;
	var lasaurl = 'lasaintranet.com/dev/';

	// var query = protocol +'//'+ host + ''+ pathName;
	//alert(query);

function QueryFactory(DS, formName, Q){
	var DomSel = document.querySelector(DS).innerHTML; 
	var formElement = document.createElement('input');
		formElement.type = 'hidden';
		formElement.name = formName;
	var trimVar = formElement.value = encodeURIComponent(DomSel.trim());
	var theQuery = Q + trimVar;

	return formElement;
	return theQuery;
}

	function createForm(){

	
      // 	if(document.querySelector('.field-name-field-job-title-training').innerHTML != null){var jobtitleContent = document.querySelector('.field-name-field-job-title-training .field-items .field-item'); var jtC = jobtitleContent.innerHTML;  } else { var jobtitleContent = ''; var jtC = '';}
      // 	if(document.querySelector('.field-name-field-department').innerHTML != null){var departmentContent = document.querySelector('.field-name-field-department .field-items .field-item a'); var deptC = departmentContent.innerHTML; } else { var departmentContent = '';var deptC = '';}
      // 	if(document.querySelector('.field-name-field-course-name').innerHTML != null){var courseNameContent = document.querySelector('.field-name-field-course-name .field-items .field-item a'); var cnC = courseNameContent.innerHTML;} else { var courseNameContent = ''; var cnC = '';}
      // 	if(document.querySelector('.field-name-field-training-category').innerHTML != null){var categoryContent = document.querySelector('.field-name-field-training-category .field-items .field-item a'); var tcC = categoryContent.innerHTML; } else { var categoryContent = ''; var tcC = '';}
      // 	if(document.querySelector('.field-name-field-course-sponser').innerHTML != null){var sponsorContent = document.querySelector('.field-name-field-course-sponser .field-items .field-item'); var sponC = sponsorContent.innerHTML; } else { var sponsorContent = ''; var sponC = '';}

      // 	if(document.querySelector('.field-name-field-location-site').innerHTML != null){var locationContent = document.querySelector('.field-name-field-location-site .field-items .field-item a'); var locC = locationContent.innerHTML; } else { var locationContent = ''; var locC = '';}
      	
      // if(document.querySelector('.name-field-attendance-hours').innerHTML != null){	var ahoursContent = document.querySelector('.field-name-field-attendance-hours .field-items .field-item'); var ahC = ahoursContent.innerHTML;} else { var ahoursContent = ''; var ahC = '';}
      // if(document.querySelector('.field-name-field-contact-hours-amount').innerHTML != null){	var contacthoursContent = document.querySelector('.field-name-field-contact-hours-amount .field-items .field-item'); var chC = contacthoursContent.innerHTML;} else { var contacthoursContent = ''; var chC = '';}
      // 	if(document.querySelector('.field-name-field-course-description').innerHTML != null){var cDescriptionContent = document.querySelector('.field-name-field-course-description .field-items .field-item'); var cdC = cDescriptionContent.innerHTML;} else {var cDescriptionContent = ''; var cdC = '';}
      // 	if(document.querySelector('.field-name-field-reason').innerHTML != null){var reasonContent = document.querySelector('.field-name-field-reason .field-items .field-item'); var rC = reasonContent.innerHTML;} else { var reasonContent = '';var rC = '';}
      // 	if(document.querySelector('.field-name-field-registration').innerHTML != null){var registrationContent = document.querySelector('.field-name-field-registration .field-items .field-item'); var regC = registrationContent.innerHTML;} else { var registrationContent = ''; var regC = '';}
      // 	if(document.querySelector('.field-name-field-travel').innerHTML != null){var travelContent = document.querySelector('.field-name-field-travel .field-items .field-item'); var tC =travelContent.innerHTML;} else { var travelContent = ''; var tC = '';}
      // 	if(document.querySelector('.field-name-field-lodging').innerHTML != null){var lodgeContent = document.querySelector('.field-name-field-lodging .field-items .field-item'); var lC =lodgeContent.innerHTML;} else { var lodgeContent = ''; var lC = '';}
      // 	if(document.querySelector('.field-name-field-meals').innerHTML != null){var mealsContent = document.querySelector('.field-name-field-meals .field-items .field-item'); var mealC = mealsContent.innerHTML;} else { var mealsContent = '';var mealC = '';}
      // 	if(document.querySelector('.field-name-field-other').innerHTML != null){var otherexpsContent = document.querySelector('.field-name-field-other .field-items .field-item'); var otherEC = otherexpsContent.innerHTML;} else { var otherexpsContent = ''; var otherEC = '';}

		// document.querySelectorAll('.field');
      	

		// Create Form
		var FORM = document.createElement('form');

		var Fieldset = document.createElement('fieldset');

		// Employee 
	alert(QueryFactory('.field-name-field-employee-3 .links .taxonomy-term-reference-0 a', 'employee', '&employee='));	

if(document.querySelector('.field-name-field-employee-3 .field-items .field-item a')){
	//  var employeeContent = document.querySelector('.field-name-field-employee-3 .field-items .field-item a'); 
	// var employeeContent = document.querySelector('.field-name-field-employee-3');
	// var employeeContent = document.querySelector('');
	// var eC = employeeContent.innerHTML;

	// var employeeHidden = document.createElement('input');
	// 	employeeHidden.type = 'hidden';
	// 	employeeHidden.name = 'employee'
	// var employVal = employeeHidden.value = encodeURIComponent(eC.trim());
	// var employQuery = '&employee='+employVal;
	QueryFactory('.field-name-field-employee-3 .field-items .field-item a', 'employee', '&employee=');
}
else if(document.querySelector('.field-name-field-employee-3 .links .taxonomy-term-reference-0 a ')){
	QueryFactory('.field-name-field-employee-3 .links .taxonomy-term-reference-0 a', 'employee', '&employee=');
	// var employeeContent = document.querySelector('.field-name-field-employee-3 .field-items .field-item a');  // var employeeContent = document.querySelector('.field-name-field-employee-3'); // var employeeContent = document.querySelector(''); // var eC = employeeContent.innerHTML; // var employeeHidden = document.createElement('input'); // 	employeeHidden.type = 'hidden'; // 	employeeHidden.name = 'employee'
	// var employVal = employeeHidden.value = encodeURIComponent(eC.trim());
	// var employQuery = '&employee='+employVal
}
 else { 
	var employeeHidden = null;
	var employQuery = null;
}
	
		// Job Title
		// var jobtitleHidden = document.createElement('input');
		// jobtitleHidden.type = 'hidden';
		// jobtitleHidden.name = 'jobtitle';
		// var jobTVal = jobtitleHidden.value = encodeURIComponent(jtC.trim());

		// Department
		// var department = document.createElement('input');
		// department.type = 'hidden';
		// department.name = 'department';
		// var Department = department.value = encodeURIComponent(deptC.trim());


		// Course Name
		// var courseName = document.createElement('input');
		// courseName.type = 'hidden';
		// courseName.name = 'coursename';
		// var CourseName = courseName.value = encodeURIComponent(cnC.trim());

		// Category 
		// var category = document.createElement('input');
		// category.type = 'hidden';
		// category.name = 'category';
		// var Category = category.value = encodeURIComponent(tcC.trim());

		// Sponsor
		// var sponsor = document.createElement('input');
		// sponsor.type = 'hidden';
		// sponsor.name = 'sponsor';
		// var Sponsor = sponsor.value = encodeURIComponent(sponC.trim());

		// location
		// var location = document.createElement('input');
		// location.type = 'hidden';
		// location.name = 'location';
		// var Loc = location.value = encodeURIComponent(locC.trim());

		// coursedate
		if(document.querySelector('.field-name-field-course-date').innerHTML != null){
			var coursedateContent = document.querySelector('.field-name-field-course-date .field-items .field-item'); 
			var cdC= coursedateContent.innerHTML;

			var coursedate = document.createElement('input');
				coursedate.type = 'hidden';
				coursedate.name = 'coursedate';
			var CourseDate = coursedate.value = encodeURIComponent(cdC.trim());
			var courseDateQuery = '&coursedate='+CourseDate;
		} 
		else { 
			var coursedate = null;
			var courseDateQuery = null;
		}
		

		// Attendence Hours
		// var ahours = document.createElement('input');
		// ahours.type = 'hidden';
		// ahours.name = 'ahours';
		// var AHours = ahours.value = encodeURIComponent(ahC.trim());

		// contacthours
		// var contacthours = document.createElement('input');
		// contacthours.type = 'hidden';
		// contacthours.name = 'contacthours';
		// var ContactHours = contacthours.value = encodeURIComponent(chC.trim());		
		
		//cDescription
		// var cDescription = document.createElement('input');
		// cDescription.type = 'hidden';
		// cDescription.name = 'cDescription';
		// var cDes = cDescription.value = encodeURIComponent(cdC.trim());		

		// reason
		// var reason = document.createElement('input');
		// reason.type = 'hidden';
		// reason.name = 'reason';
		// var Reason = reason.value = encodeURIComponent(rC.trim());	

		// registration
		// var registration = document.createElement('input');
		// registration.type = 'hidden';
		// registration.name = 'registration';
		// var Reg = registration.value = encodeURIComponent(regC.trim());

		// travel
		// var travel = document.createElement('input');
		// travel.type = 'hidden';
		// travel.name = 'travel';
		// var Travel = travel.value = encodeURIComponent(tC.trim());

		// lodge
		// var lodge = document.createElement('input');
		// lodge.type = 'hidden';
		// lodge.name = 'lodge';
		// var Lodge = lodge.value = encodeURIComponent(lC.trim());

		// meals
		// var meals = document.createElement('input');
		// meals.type = 'hidden';
		// meals.name = 'meals';
		// var Meals = meals.value = encodeURIComponent(mealC.trim());

		// otherexps
		// var otherexps = document.createElement('input');
		// otherexps.type = 'hidden';
		// otherexps.name = 'otherexps';
		// var OtherExps = otherexps.value = encodeURIComponent(otherEC.trim());

		// button
		var BTN = document.createElement('button');
		var BTNtext=document.createTextNode("Request for Training");
		BTN.appendChild(BTNtext);
		//BTN.value = "Request for Training";

		var QueryString = protocol +'//'+ lasaurl + '?q=training/request-training'; 
		if(employQuery != null) QueryString += employQuery;
		if(courseDateQuery != null) QueryString += courseDateQuery;


		//+'?q=training/request-training&'+'&jobtitle='+jobTVal+'&department='+Department+'&coursename='+CourseName+'&category='+Category+'&sponsor='+Sponsor+'&location='+Loc+'&coursedate='+CourseDate+'&ahours='+AHours+'&contacthours='+ContactHours+'&cDescription='+cDes+'&reason='+Reason+'&travel='+Travel+'&lodge='+Lodge+'&meals='+Meals+'&otherexps='+OtherExps;

		FORM.action = QueryString;

		if(employeeHidden != null) Fieldset.appendChild(employeeHidden);
		//Fieldset.appendChild(jobtitleHidden);
		//Fieldset.appendChild(department);
		//Fieldset.appendChild(courseName);
		//Fieldset.appendChild(category);
		//Fieldset.appendChild(sponsor);
		//Fieldset.appendChild(location);
		if(coursedate != null) Fieldset.appendChild(coursedate);
		//Fieldset.appendChild(ahours);
					//Fieldset.appendChild(progid);
		// Fieldset.appendChild(contacthours);
		// Fieldset.appendChild(cDescription);
		// Fieldset.appendChild(reason);
		// Fieldset.appendChild(travel);
		// Fieldset.appendChild(lodge);
		// Fieldset.appendChild(meals);
		// Fieldset.appendChild(otherexps);
		// Fieldset.appendChild(totalcosts);
		Fieldset.appendChild(BTN);

		FORM.appendChild(Fieldset);
		document.body.querySelector('.node-courses-and-conferences').appendChild(FORM);
			
		//return FORM;

}

//alert(createForm());

window.addEventListener("load", eventWindowLoaded, false);
function eventWindowLoaded () {
   createForm();
}



// var matches = document.querySelectorAll(".field-item");

// var i;
// for (i = 0; i < matches.length; i++) {
// 	document.write(matches[i].innerHTML+'<br />');
// }
//alert(matches.length);

</script>
</body>
</html>