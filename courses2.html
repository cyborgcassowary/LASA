<!DOCTYPE html>
<html>
<head>
	<title>javascript example</title>
</head>
<body>

<div class="region region-content">
    <div id="block-system-main" class="block block-system">

    
  <div class="content">
    <div id="node-284424747" class="node node-courses-and-conferences node-full clearfix" about="/dev/?q=courses-and-conferences/3477" typeof="sioc:Item foaf:Document">

      
  
  <div class="content clearfix">
    <div class="field field-name-field-course-name field-type-taxonomy-term-reference field-label-above clearfix"><h3 class="field-label">Course Name: </h3><ul class="links"><li class="taxonomy-term-reference-0"><a href="/dev/?q=course-names/troubleshooting-your-activated-sludge-plantntirification-denitrification" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">Troubleshooting your Activated Sludge Plant/Ntirification Denitrification</a></li></ul></div>

<!-- Employees -->
    <div class="field field-name-field-employee-3 field-type-taxonomy-term-reference field-label-above clearfix"><h3 class="field-label">Employee: </h3>
    	<ul class="links"> 
    	.links .taxonomy-term-reference-0 a 
    		<li class="taxonomy-term-reference-0">
    			<a href="/dev/?q=employees/william-t-markley-sr" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">William T Markley Sr</a></li></ul></div>


<!-- Department -->
    <div class="field field-name-field-department field-type-taxonomy-term-reference field-label-above clearfix"><h3 class="field-label">Department: </h3><ul class="links"><li class="taxonomy-term-reference-0"><a href="/dev/?q=department/treatment-plant" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">Treatment Plant</a></li></ul></div>


<!-- Training Category -->
    <div class="field field-name-field-training-category field-type-taxonomy-term-reference field-label-above clearfix"><h3 class="field-label">Category: </h3><ul class="links"><li class="taxonomy-term-reference-0"><a href="/dev/?q=taxonomy/term/184" typeof="skos:Concept" property="rdfs:label skos:prefLabel" datatype="">Treatment plant operation</a></li></ul></div>


<!-- City State -->
    <div class="field field-name-field-city-state field-type-text field-label-above"><div class="field-label">City State:&nbsp;</div><div class="field-items"><div class="field-item even">Lebanon,PA</div></div></div>

<!-- Sponsor -->
    <div class="field field-name-field-course-sponser field-type-text field-label-above"><div class="field-label">Sponsor:&nbsp;</div><div class="field-items"><div class="field-item even">EPWPCOA</div></div></div>


<!-- Date -->
    <div class="field field-name-field-course-date field-type-datestamp field-label-above"><div class="field-label">Date:&nbsp;</div><div class="field-items"><div class="field-item even"><span class="date-display-single" property="dc:date" datatype="xsd:dateTime" content="2007-04-05T00:00:00-04:00">Thursday, April 5, 2007</span></div></div></div>


<!-- Attendance -->
    <div class="field field-name-field-attendance-hours field-type-number-decimal field-label-above"><div class="field-label">Attendance Hours:&nbsp;</div><div class="field-items"><div class="field-item even">7.50</div></div></div>


<!-- Contact Hours Amount -->
    <div class="field field-name-field-contact-hours-amount field-type-number-decimal field-label-above"><div class="field-label">Contact Hours Amount:&nbsp;</div><div class="field-items"><div class="field-item even">6.00</div></div></div>


<!-- Registration -->
    <div class="field field-name-field-registration field-type-number-decimal field-label-above"><div class="field-label">Registration:&nbsp;</div><div class="field-items"><div class="field-item even">135.00</div></div></div>


<!-- Lodging -->
    <div class="field field-name-field-lodging field-type-number-decimal field-label-above"><div class="field-label">Lodging:&nbsp;</div><div class="field-items"><div class="field-item even">0.00</div></div></div>


<!-- Travel -->
    <div class="field field-name-field-travel field-type-number-decimal field-label-above"><div class="field-label">Travel:&nbsp;</div><div class="field-items"><div class="field-item even">0.00</div></div></div>


<!-- Meals -->
    <div class="field field-name-field-meals field-type-number-decimal field-label-above"><div class="field-label">Meals:&nbsp;</div><div class="field-items"><div class="field-item even">0.00</div></div></div>

<!-- Course Description -->
<div class="field field-name-field-course-description field-type-text-long field-label-above"><div class="field-label">Course Description:&nbsp;</div><div class="field-items"><div class="field-item even">attached</div></div></div>

<!-- Other -->
    <div class="field field-name-field-other field-type-number-decimal field-label-above"><div class="field-label">Other:&nbsp;</div><div class="field-items"><div class="field-item even">0.00</div></div></div>

<!-- Reason -->
    <div class="field field-name-field-reason field-type-list-text field-label-above"><div class="field-label">Reason for Taking Course:&nbsp;</div><div class="field-items"><div class="field-item even">Earn Credit Hours</div></div></div>


<!-- Complete -->
    <div class="field field-name-field-complete field-type-list-text field-label-above"><div class="field-label">Complete:&nbsp;</div><div class="field-items"><div class="field-item even">Yes</div></div></div>


<!-- Location Site -->
    <div class="field field-name-field-location-site field-type-taxonomy-term-reference field-label-above clearfix"><h3 class="field-label">Location Site: </h3><ul class="links"><li class="taxonomy-term-reference-0"><div id="taxonomy-term-5525" class="taxonomy-term vocabulary-location-site">

      <h2><a href="/dev/?q=location-site/lebanon">Lebanon</a></h2>
  
  <div class="content">
      </div>

</div>
</li></ul></div>

<!-- Job Title -->
<div class="field field-name-field-job-title-training field-type-text field-label-above"><div class="field-label">Job Title:&nbsp;</div><div class="field-items"><div class="field-item even">Operator 1</div></div></div><div class="field field-name-field-days field-type-number-decimal field-label-above"><div class="field-label">Days:&nbsp;</div><div class="field-items"><div class="field-item even">1.00</div></div></div>  </div>

      <div class="link-wrapper">
      <ul class="links inline"><li class="print_html first last"><a href="/dev/?q=print/284424747" title="Display a printer-friendly version of this page." class="print-page" rel="nofollow">Printer-friendly version</a></li>
</ul>    </div>
  
  
</div>
  </div>
</div>
  </div>


<script type="text/javascript">

	var protocol = location.protocol;
	var host = location.host;
	var pathName = location.pathname;
	var lasaurl = host + pathName;


	function QueryFactory(DS, formName, Q){
		var DomSel = document.querySelector(DS).innerHTML; 
		var fE = [];

		var formElement = document.createElement('input');
			formElement.type = 'hidden';
		var FName = formElement.name = formName;
		var trimVar = formElement.value = encodeURIComponent(DomSel.trim());
		var theQuery = Q + trimVar;

	// Create an array to return the name of the hidden form element and part of the query string the the url.
		var D = [formElement, FName, theQuery];
			return{
				D: D
			};
	}



	function createForm(){
		// Create Form
		var FORM = document.createElement('div');
		FORM.id = 'requestcontainer';
		
		// button
		var BTN = document.createElement('a');
		var BTNtext=document.createTextNode("Request for Training");
		BTN.appendChild(BTNtext);
		//BTN.value = "Request for Training";

		var QueryString = protocol +'//'+ lasaurl + '?q=training/request-training'; 

		// Setting up Global Array variables for each possible field.
		var Employ33 = [];
		var JobTitl3 = [];
		var D3partment = [];
		var CourseNam3 = [];
		var Cat3 = [];
		var Cours3Sponsor = [];
		var Attendanc3Hours = [];
		var ContactHour3 = [];
		var R3gistration = [];
		var Lodging3 = [];
		var Trav3l = [];
		var M3als = [];
		var D3scription = [];
		var Oth3r = [];
		var R3ason = [];
		var Location3 = [];


		// Employee - 

		if(document.querySelector('.field-name-field-employee-3 .field-items .field-item a')){	
			Employ33.push(QueryFactory('.field-name-field-employee-3 .field-items .field-item a', 'employee', '&employee='));
			QueryString += Employ33[0].D[2] ; 
		} 
		if(document.querySelector('.field-name-field-employee-3 .links .taxonomy-term-reference-0 a')){
			Employ33.push(QueryFactory('.field-name-field-employee-3 .links .taxonomy-term-reference-0 a', 'employee', '&employee='));
			QueryString += Employ33[0].D[2] ; 
		}
		

		// Job title - field-name-field-job-title-training

		if(document.querySelector('.field-name-field-job-title-training .field-items .field-item')){	
			JobTitl3.push(QueryFactory('.field-name-field-job-title-training .field-items .field-item', 'jobtitle', '&jobtitle='));
			QueryString += JobTitl3[0].D[2] ; 
			// Fieldset.appendChild(JobTitl3[0].D[);
		} 
		if(document.querySelector('.field-name-field-job-title-training .links .taxonomy-term-reference-0')){
			JobTitl3.push(QueryFactory('.field-name-field-job-title-training .links .taxonomy-term-reference-0', 'jobtitle', '&jobtitle='));
			QueryString += JobTitl3[0].D[2] ; 
			// Fieldset.appendChild(JobTitl3[0].D[0] );
		}
		 
		// // Department -  field-name-field-department

		if(document.querySelector('.field-name-field-department .links .taxonomy-term-reference-0 a')){
			D3partment.push(QueryFactory('.field-name-field-department .links .taxonomy-term-reference-0 a', 'department', '&department='));
			QueryString += D3partment[0].D[2] ; 
			// Fieldset.appendChild(D3partment[0].D[0]);
		} 
		if(document.querySelector('.field-name-field-department .field-items .field-item a')){	
			D3partment.push(QueryFactory('.field-name-field-department .field-items .field-item a', 'department', '&department='));
			QueryString += D3partment[0].D[2] ; 
			// Fieldset.appendChild(D3partment[0].D[0]);
		}
		
		// //  else { 
		// // 	return null;
		// // }

		
		// // Course Name - field-name-field-coursename

		if(document.querySelector('.field-name-field-course-name .field-items .field-item a')){	
			CourseNam3.push(QueryFactory('.field-name-field-course-name .field-items .field-item a', 'coursename', '&coursename='));
			QueryString += CourseNam3[0].D[2] ; 
			// Fieldset.appendChild(CourseNam3[0].D[0]);
		} 	
		if(document.querySelector('.field-name-field-course-name .links .taxonomy-term-reference-0 a ')){
			CourseNam3.push(QueryFactory('.field-name-field-course-name .links .taxonomy-term-reference-0 a', 'coursename', '&coursename='));
			QueryString += CourseNam3[0].D[2] ; 
		}
		

		// // Training Category - field-name-field-training-category

		if(document.querySelector('.field-name-field-training-category .field-items .field-item a')){	
			Cat3.push(QueryFactory('.field-name-field-training-category .field-items .field-item a', 'category', '&category='));
			QueryString += Cat3[0].D[2] ; 
			// Fieldset.appendChild(Cat3[0].D[0]);
		} 	
		if(document.querySelector('.field-name-field-training-category .links .taxonomy-term-reference-0 a ')){
			Cat3.push(QueryFactory('.field-name-field-training-category .links .taxonomy-term-reference-0 a', 'category', '&category='));
			QueryString += Cat3[0].D[2] ; 
			// Fieldset.appendChild(Cat3[0].D[0]);
		}
		 

		// // // // Course Sponsor - field-name-field-course-sponsor

		if(document.querySelector('.field-name-field-course-sponser .field-items .field-item a')){	
			Cours3Sponsor.push(QueryFactory('.field-name-field-course-sponser .field-items .field-item a', 'sponsor', '&sponsor='));
			QueryString += Cours3Sponsor[0].D[2] ; 
		} 
		if(document.querySelector('.field-name-field-course-sponser .links .taxonomy-term-reference-0 a ')){
			Cours3Sponsor.push(QueryFactory('.field-name-field-course-sponser .links .taxonomy-term-reference-0 a', 'sponsor', '&sponsor='));
			QueryString += Cours3Sponsor[0].D[2] ; 
		}

		// // // // Attendance Hours - field-name-field-attendance-hours

		if(document.querySelector('.field-name-field-attendance-hours .field-items .field-item a')){	
			Attendanc3Hours.push(QueryFactory('.field-name-field-attendance-hours .field-items .field-item a', 'ahours', '&ahours='));
			QueryString += Attendanc3Hours[0].D[2] ; 
		} 	
		if(document.querySelector('.field-name-field-attendance-hours .links .taxonomy-term-reference-0 a ')){
			Attendanc3Hours.push(QueryFactory('.field-name-field-attendance-hours .links .taxonomy-term-reference-0 a', 'ahours', '&ahours='));
			QueryString += Attendanc3Hours[0].D[2] ; 
		}

		// // // // Contact Hours Amount - field-name-field-contact-hours-amount

		if(document.querySelector('.field-name-field-contact-hours-amount .field-items .field-item a')){	
			ContactHour3.push(QueryFactory('.field-name-field-contact-hours-amount .field-items .field-item a', 'contacthours', '&contacthours='));
			QueryString += ContactHour3[0].D[2] ; 
		}
		if(document.querySelector('.field-name-field-contact-hours-amount .links .taxonomy-term-reference-0 a ')){
			ContactHour3.push(QueryFactory('.field-name-field-contact-hours-amount .links .taxonomy-term-reference-0 a', 'contacthours', '&contacthours='));
			QueryString += ContactHour3[0].D[2] ; 
		}

		// // // // Registration field-name-field-registration

		if(document.querySelector('.field-name-field-registration .field-items .field-item a')){	
			R3gistration.push(QueryFactory('.field-name-field-registration .field-items .field-item a', 'registration', '&registration='));
			QueryString += R3gistration[0].D[2] ; 
		} 	
		if(document.querySelector('.field-name-field-registration .links .taxonomy-term-reference-0 a ')){
			R3gistration.push(QueryFactory('.field-name-field-registration .links .taxonomy-term-reference-0 a', 'registration', '&registration='));
			QueryString += R3gistration[0].D[2] ; 
		}
		 

		// // // Lodging field-name-field-lodging

		if(document.querySelector('.field-name-field-lodging .field-items .field-item a')){	
			Lodging3.push(QueryFactory('.field-name-field-lodging .field-items .field-item a', 'lodge', '&lodge='));
			QueryString += Lodging3[0].D[2] ; 
		} 
		if(document.querySelector('.field-name-field-lodging .links .taxonomy-term-reference-0 a ')){
			Lodging3.push(QueryFactory('.field-name-field-lodging .links .taxonomy-term-reference-0 a', 'lodge', '&lodge='));
			QueryString += Lodging3[0].D[2] ; 
		}
		 

		// // // // Travel field-name-field-travel

		if(document.querySelector('.field-name-field-travel .field-items .field-item a')){	
			Trav3l.push(QueryFactory('.field-name-field-travel .field-items .field-item a', 'travel', '&travel='));
			QueryString += Trav3l[0].D[2] ; 
		} 	
		if(document.querySelector('.field-name-field-travel .links .taxonomy-term-reference-0 a ')){
			Trav3l.push(QueryFactory('.field-name-field-travel .links .taxonomy-term-reference-0 a', 'travel', '&travel='));
			QueryString += Trav3l[0].D[2] ; 
		}
		 

		// // // Meals field-name-field-meals

		if(document.querySelector('.field-name-field-meals .field-items .field-item a')){	
			M3als.push(QueryFactory('.field-name-field-meals .field-items .field-item a', 'meals', '&meals='));
			QueryString += M3als[0].D[2] ; 
			// Fieldset.appendChild();
		} 	
		if(document.querySelector('.field-name-field-meals .links .taxonomy-term-reference-0 a ')){
			M3als.push(QueryFactory('.field-name-field-meals .links .taxonomy-term-reference-0 a', 'meals', '&meals='));
			QueryString += M3als[0].D[2] ; 
			// Fieldset.appendChild(M3als[0].D[0]);
		}  

		// // // Course Description field-name-field-course-description

		if(document.querySelector('.field-name-field-course-description .field-items .field-item a')){	
			D3scription.push(QueryFactory('.field-name-field-course-description .field-items .field-item a', 'cDescription', '&cDescription='));
			QueryString += D3scription[0].D[2] ; 
		} 	
		if(document.querySelector('.field-name-field-course-description .links .taxonomy-term-reference-0 a')){
			D3scription.push(QueryFactory('.field-name-field-course-description .links .taxonomy-term-reference-0 a', 'cDescription', '&cDescription='));
			QueryString += D3scription[0].D[2] ; 
		}
 

		// // // Other field-name-field-other

		if(document.querySelector('.field-name-field-other .field-items .field-item a')){	
			Oth3r.push(QueryFactory('.field-name-field-other .field-items .field-item a', 'otherexps', '&otherexps='));
			QueryString += Oth3r[0].D[2] ; 
		} 	
		if(document.querySelector('.field-name-field-other .links .taxonomy-term-reference-0 a ')){
			Oth3r.push(QueryFactory('.field-name-field-other .links .taxonomy-term-reference-0 a', 'otherexps', '&otherexps='));
			QueryString += Oth3r[0].D[2] ; 
		}
 

		// // // // Reason field-name-field-reason

		if(document.querySelector('.field-name-field-reason .field-items .field-item a')){	
			R3ason.push(QueryFactory('.field-name-field-reason .field-items .field-item a', 'reason', '&reason='));
			QueryString += R3ason[0].D[2] ; 
		} 	
		if(document.querySelector('.field-name-field-reason .links .taxonomy-term-reference-0 a ')){
			R3ason.push(QueryFactory('.field-name-field-reason .links .taxonomy-term-reference-0 a', 'reason', '&reason='));
			QueryString += R3ason[0].D[2] ; 
		}
 

		// // // Location Site field-name-field-location-site

		if(document.querySelector('.field-name-field-location-site .links .taxonomy-term-reference-0 a')){
			Location3.push(QueryFactory('.field-name-field-location-site .links .taxonomy-term-reference-0 a', 'location', '&location='));
			QueryString += Location3[0].D[2]  
		} 	
		if(document.querySelector('.field-name-field-location-site .field-items .field-item a')){	
			Location3.push(QueryFactory('.field-name-field-location-site .field-items .field-item a', 'location', '&location='));
			QueryString += Location3[0].D[2] ; 
		}

		//+'?q=training/request-training&'+'&jobtitle='+jobTVal+'&department='+Department+'&coursename='+CourseName+'&category='+Category+'&sponsor='+Sponsor+'&location='+Loc+'&coursedate='+CourseDate+'&ahours='+AHours+'&contacthours='+ContactHours+'&cDescription='+cDes+'&reason='+Reason+'&travel='+Travel+'&lodge='+Lodge+'&meals='+Meals+'&otherexps='+OtherExps;



		

var a = document.createAttribute("href");
  a.value = QueryString;
  BTN.setAttributeNode(a);
  //a.appendChild(BTN);

	

		FORM.appendChild(BTN);
		document.body.querySelector('.node-courses-and-conferences').appendChild(FORM);
}

window.addEventListener("load", eventWindowLoaded, false);
function eventWindowLoaded () {
   createForm();
}






/*

http://localhost:8888/lasa/courses2.html?q=training/request-training&employee=William%20T%20Markley%20Sremployee&jobtitle=Operator%201jobtitle&department=Treatment%20Plantdepartment&coursename=Troubleshooting%20your%20Activated%20Sludge%20Plant%2FNtirification%20Denitrificationcoursename&category=Treatment%20plant%20operationcategory&location=Lebanonlocation

*/ 




/*

This Javascript Q&A on accessing Arrays in Functions helped me out so much today: http://stackoverflow.com/questions/13947145/javascript-accessing-array-inside-an-object


She doesn't know who I truly am anymore
I wish I could show her what I became
because everything I accomplished is now gone
and every title I use to have no longer exist.
I don't want to hear "It never matter to me."
And disregard everything we once shared

*/

</script>
</body>
</html>